### **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ GRE-—Ç—É–Ω–Ω–µ–ª—è –º–µ–∂–¥—É –æ—Ñ–∏—Å–∞–º–∏ DT –∏ HQ –Ω–∞ EcoRouter (VyOS)**  

–î–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ GRE-—Ç—É–Ω–Ω–µ–ª—è –º–µ–∂–¥—É `R-DT` –∏ `R-HQ` –≤ VyOS (EcoRouter) –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É –Ω–∞ –æ–±–æ–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä–∞—Ö.  

---  

### **1. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–æ–≤**  
–ò—Å–ø–æ–ª—å–∑—É–µ–º —Å–µ—Ç—å **10.10.10.0/30** –¥–ª—è GRE-—Ç—É–Ω–Ω–µ–ª—è:  
- **R-DT (DT)** ‚Äì `10.10.10.1`  
- **R-HQ (HQ)** ‚Äì `10.10.10.2`  

–í–Ω–µ—à–Ω–∏–µ IP-–∞–¥—Ä–µ—Å–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä–æ–≤ (–ø—Ä–∏–º–µ—Ä):  
- **R-DT (DT)** ‚Äì `203.0.113.1`  
- **R-HQ (HQ)** ‚Äì `198.51.100.1`  

---

### **2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GRE –Ω–∞ R-DT**
–ù–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä–µ **R-DT** –≤—ã–ø–æ–ª–Ω—è–µ–º:  
```bash
configure

# –°–æ–∑–¥–∞–Ω–∏–µ GRE-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
set interfaces tunnel tun0 encapsulation gre
set interfaces tunnel tun0 address 10.10.10.1/30
set interfaces tunnel tun0 local-ip 203.0.113.1
set interfaces tunnel tun0 remote-ip 198.51.100.1
set interfaces tunnel tun0 mtu 1476

# –í–∫–ª—é—á–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
set interfaces tunnel tun0 enable

commit
save
exit
```

---

### **3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GRE –Ω–∞ R-HQ**
–ù–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä–µ **R-HQ** –≤—ã–ø–æ–ª–Ω—è–µ–º:  
```bash
configure

# –°–æ–∑–¥–∞–Ω–∏–µ GRE-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
set interfaces tunnel tun0 encapsulation gre
set interfaces tunnel tun0 address 10.10.10.2/30
set interfaces tunnel tun0 local-ip 198.51.100.1
set interfaces tunnel tun0 remote-ip 203.0.113.1
set interfaces tunnel tun0 mtu 1476

# –í–∫–ª—é—á–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
set interfaces tunnel tun0 enable

commit
save
exit
```

---

### **4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã GRE-—Ç—É–Ω–Ω–µ–ª—è**
–ù–∞ **R-DT** –≤—ã–ø–æ–ª–Ω—è–µ–º –∫–æ–º–∞–Ω–¥—É:  
```bash
ping 10.10.10.2 source 10.10.10.1
```
–ù–∞ **R-HQ** –≤—ã–ø–æ–ª–Ω—è–µ–º –∫–æ–º–∞–Ω–¥—É:  
```bash
ping 10.10.10.1 source 10.10.10.2
```
–ï—Å–ª–∏ –ø–∏–Ω–≥ –ø—Ä–æ—Ö–æ–¥–∏—Ç, —Ç—É–Ω–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

---

### **5. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –¥–ª—è —Å–≤—è–∑–∏ –º–µ–∂–¥—É –æ—Ñ–∏—Å–∞–º–∏**
–¢–µ–ø–µ—Ä—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç—ã, —á—Ç–æ–±—ã –ø–∞–∫–µ—Ç—ã –∏–∑ —Å–µ—Ç–∏ `192.168.33.0/24` (DT) –º–æ–≥–ª–∏ –¥–æ—Ö–æ–¥–∏—Ç—å –¥–æ `192.168.11.0/24` (HQ) —á–µ—Ä–µ–∑ GRE-—Ç—É–Ω–Ω–µ–ª—å.

#### **–ù–∞ R-DT (DT)**
```bash
configure
set protocols static route 192.168.11.0/24 next-hop 10.10.10.2
commit
save
exit
```

#### **–ù–∞ R-HQ (HQ)**
```bash
configure
set protocols static route 192.168.33.0/24 next-hop 10.10.10.1
commit
save
exit
```

---

### **6. –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏**
–ù–∞ **R-DT** (–∏–∑ —Å–µ—Ç–∏ `192.168.33.0/24`) –ø—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ö–æ—Å—Ç–∞ –≤ `192.168.11.0/24`:
```bash
ping 192.168.11.1 source 192.168.33.1
```
–ù–∞ **R-HQ** (–∏–∑ —Å–µ—Ç–∏ `192.168.11.0/24`) –ø—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ö–æ—Å—Ç–∞ –≤ `192.168.33.0/24`:
```bash
ping 192.168.33.1 source 192.168.11.1
```

–ï—Å–ª–∏ –ø–∏–Ω–≥ –ø—Ä–æ—Ö–æ–¥–∏—Ç, —Ç–æ GRE-—Ç—É–Ω–Ω–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç, –∏ –º–µ–∂–¥—É –æ—Ñ–∏—Å–∞–º–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ —Å–≤—è–∑—å. üöÄ
